// Estilização do componente de diário e planejamento da campanha

.campaign-journal-section {
  // Configuração geral das abas
  .journal-tabs {
    // Customização das abas do PrimeNG
    ::ng-deep .p-tabview-nav {
      background: rgba(139, 69, 19, 0.1);
      border-radius: 8px 8px 0 0;

      .p-tabview-nav-link {
        color: #8b4513;
        font-weight: 600;
        padding: 1rem 1.5rem;
        border: none;

        .pi {
          margin-right: 0.5rem;
        }

        &:hover {
          background: rgba(139, 69, 19, 0.2);
        }
      }

      .p-tabview-nav-link[aria-selected="true"] {
        background: #8b4513;
        color: white;

        &:hover {
          background: #8b4513;
        }
      }
    }

    ::ng-deep .p-tabview-panels {
      background: white;
      border: 2px solid #8b4513;
      border-radius: 0 0 8px 8px;
      padding: 1.5rem;
      min-height: 500px;
    }
  }
}

// Seção do Diário de Aventuras
.journal-content {
  .saga-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid #d4af37;

    .saga-title {
      font-family: "Cinzel", serif;
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--accent-danger);
      margin: 0;
      text-shadow: 1px 1px 2px rgba(139, 69, 19, 0.3);
    }

    .add-entry-btn {
      ::ng-deep.p-button {
        background: #d4af37;
        border-color: #d4af37;
        font-weight: 600;

        &:hover {
          background: #b8941f;
          border-color: #b8941f;
        }
      }
    }
  }

  .new-entry-input {
    margin-bottom: 1.5rem;

    input {
      border: 2px solid #d4af37;
      border-radius: 8px;
      padding: 0.75rem;
      font-size: 1rem;

      &:focus {
        border-color: #8b4513;
        box-shadow: 0 0 5px rgba(139, 69, 19, 0.3);
      }
    }
  }

  .new-act-input {
    margin-bottom: 1.5rem;

    .new-act-form {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0;
      background: transparent;
      border: none;
      border-radius: 0;

      .pending-act-input {
        font-family: "Cinzel", serif;
        font-size: 1.1rem;
        font-weight: 600;
        border: none !important;
        border-radius: 0;
        padding: 0;
        color: white !important;
        background: transparent !important;

        &:focus {
          border: none !important;
          box-shadow: none !important;
          outline: none;
        }

        &::placeholder {
          color: rgba(255, 255, 255, 0.6) !important;
        }
      }

      .new-act-actions {
        display: flex;
        gap: 0.5rem;

        ::ng-deep .p-button {
          width: 2rem;
          height: 2rem;
          padding: 0;
        }
      }
    }
  }

  .journal-entries {
    .journal-accordion {
      // Customização específica do accordion do diário
      ::ng-deep {
        .p-accordion-header {
          background: #8b4513;
          border: 1px solid #8b4513;
          border-radius: 8px 8px 0 0;
          margin-bottom: 0;

          .p-accordion-header-link {
            padding: 1rem 1.5rem;
            color: white;
            background: transparent;
            border: none;
            width: 100%;

            &:hover {
              background: rgba(255, 255, 255, 0.1);
            }

            &:focus {
              box-shadow: 0 0 0 2px #d4af37;
            }
          }

          &.p-accordion-header-active {
            background: #6d350f;
            border-color: #6d350f;
          }
        }

        .p-accordion-content {
          background: linear-gradient(135deg, #f5f5dc 0%, #f0e68c 100%);
          border: 2px solid #8b4513;
          border-top: none;
          border-radius: 0 0 8px 8px;
          margin-bottom: 1rem;

          .p-accordion-content-wrapper {
            padding: 0;
          }
        }

        .p-accordion-tab:last-child {
          .p-accordion-content {
            margin-bottom: 0;
          }
        }
      }

      .accordion-entry-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;

        .entry-title {
          font-family: "Cinzel", serif;
          font-size: 1.1rem;
          font-weight: 600;
          margin: 0;
          flex: 1;
        }

        .entry-title-input {
          font-family: "Cinzel", serif;
          font-size: 1.1rem;
          font-weight: 600;
          margin: 0;
          flex: 1;
          background: transparent;
          border: none;
          border-radius: 0;
          padding: 0;
          color: white;

          &:focus {
            outline: none;
            border: none;
            box-shadow: none;
          }

          &::placeholder {
            color: rgba(255, 255, 255, 0.6);
          }
        }

        .entry-actions {
          display: flex;
          gap: 0.5rem;
          margin-left: 1rem;

          ::ng-deep .p-button {
            width: 2rem;
            height: 2rem;
            padding: 0;

            &.p-button-text {
              color: white;

              &:hover {
                background: rgba(255, 255, 255, 0.2);
              }

              &.p-button-danger:hover {
                background: rgba(221, 30, 49, 0.657);
              }
            }
          }
        }
      }

      .accordion-entry-content {
        padding: 1.5rem;

        .chapters-section {
          .chapters-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;

            .chapter-item {
              padding: 1rem 0;
              border-left: 4px solid #d4af37;
              padding-left: 1rem;
              transition: all 0.3s ease;
              position: relative;

              &:hover {
                .chapter-actions {
                  opacity: 1 !important;
                  visibility: visible !important;
                }
              }

              .chapter-header {
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
                margin-bottom: 0.5rem;

                .chapter-title {
                  font-family: "Cinzel", serif;
                  font-size: 1.1rem;
                  font-weight: 600;
                  color: #d4af37;
                  margin: 0;
                  flex: 1;
                  padding-right: 1rem;
                }

                .chapter-actions {
                  display: flex;
                  gap: 0.5rem;
                  opacity: 0;
                  visibility: hidden;
                  transition: all 0.3s ease;

                  .chapter-edit-btn,
                  .chapter-delete-btn {
                    ::ng-deep.p-button {
                      width: 1.5rem;
                      height: 1.5rem;
                      padding: 0;
                      font-size: 0.8rem;

                      &.p-button-text {
                        color: #8b4513;

                        &:hover {
                          background: rgba(185, 92, 26, 0.758); // Escurecido (era 0.1)
                          color: #8b4513;
                        }
                      }

                      &.p-button-danger {
                        color: #dc3545;

                        &:hover {
                          background: rgba(220, 53, 70, 0.686); // Escurecido (era 0.1)
                          color: #dc3545;
                        }
                      }
                    }
                  }
                }
              }

              .chapter-edit-form {
                .chapter-title-input {
                  font-family: "Cinzel", serif;
                  font-size: 1.1rem;
                  font-weight: 600;
                  border: 2px solid #d4af37;
                  border-radius: 8px;
                  padding: 0.5rem;
                  color: #d4af37;
                  background: rgba(0, 0, 0, 0.8);

                  &:focus {
                    border-color: #d4af37;
                    box-shadow: 0 0 5px rgba(212, 175, 55, 0.3);
                    outline: none;
                  }

                  &::placeholder {
                    color: #999;
                  }
                }

                .chapter-content-textarea {
                  font-family: "Georgia", serif;
                  font-size: 1rem;
                  line-height: 1.7;
                  border: 2px solid #d4af37;
                  border-radius: 8px;
                  padding: 0.75rem;
                  color: #ffffff;
                  background: rgba(0, 0, 0, 0.8);
                  resize: vertical;

                  &:focus {
                    border-color: #d4af37;
                    box-shadow: 0 0 5px rgba(212, 175, 55, 0.3);
                    outline: none;
                  }

                  &::placeholder {
                    color: #999;
                  }
                }

                .chapter-edit-actions {
                  display: flex;
                  gap: 0.75rem;

                  ::ng-deep .p-button {
                    padding: 0.5rem 1rem;
                    font-size: 0.9rem;
                  }
                }
              }

              // Estilo específico para criação de novos capítulos
              .new-chapter-form {
                padding: 1rem !important;
                background: rgba(212, 175, 55, 0.1) !important;
                border: 2px solid #d4af37 !important;
                border-radius: 8px !important;
                margin-bottom: 1rem !important;

                .chapter-edit-form {
                  .chapter-title-input {
                    font-family: "Cinzel", serif;
                    font-size: 1.1rem;
                    font-weight: 600;
                    border: 2px solid #d4af37 !important;
                    border-radius: 8px;
                    padding: 0.5rem;
                    background: white !important;
                    color: #333 !important;
                    width: 100%;
                    margin-bottom: 0.75rem;

                    &:focus {
                      border-color: #8b4513 !important;
                      box-shadow: 0 0 5px rgba(139, 69, 19, 0.3) !important;
                      outline: none;
                    }

                    &::placeholder {
                      color: #999 !important;
                    }
                  }

                  .chapter-content-textarea {
                    font-family: "Georgia", serif;
                    font-size: 1rem;
                    line-height: 1.7;
                    border: 2px solid #d4af37 !important;
                    border-radius: 8px;
                    padding: 0.75rem;
                    background: white !important;
                    color: #333 !important;
                    width: 100%;
                    resize: vertical;
                    margin-bottom: 0.75rem;

                    &:focus {
                      border-color: #8b4513 !important;
                      box-shadow: 0 0 5px rgba(139, 69, 19, 0.3) !important;
                      outline: none;
                    }

                    &::placeholder {
                      color: #999 !important;
                    }
                  }

                  .chapter-edit-actions {
                    display: flex;
                    gap: 0.75rem;

                    ::ng-deep .p-button {
                      padding: 0.5rem 1rem;
                      font-size: 0.9rem;
                    }
                  }
                }
              }

              .chapter-content {
                .chapter-text {
                  font-family: "Georgia", serif;
                  font-size: 1rem;
                  line-height: 1.7;
                  color: #ffffff; // Texto branco para contraste com fundo escuro
                  margin: 0;
                  white-space: pre-wrap;
                  text-align: justify;
                }

                .chapter-placeholder {
                  font-style: italic;
                  color: #cccccc; // Cor clara para placeholder
                  margin: 0;
                  font-size: 0.9rem;
                }
              }
            }
          }
        }

        .edit-mode {
          .entry-textarea {
            border: 2px solid #d4af37;
            border-radius: 8px;
            font-family: "Georgia", serif;
            font-size: 1rem;
            line-height: 1.6;
            resize: vertical;

            &:focus {
              border-color: #8b4513;
              box-shadow: 0 0 5px rgba(139, 69, 19, 0.3);
            }
          }

          .edit-actions {
            margin-top: 1rem;
            display: flex;
            gap: 0.75rem;

            ::ng-deep .p-button {
              padding: 0.5rem 1rem;
              font-size: 0.9rem;
            }
          }
        }
      }
    }

    // Fallback para quando não há entradas (manter estrutura existente se necessário)
    .journal-entry-card {
      background: linear-gradient(135deg, #f5f5dc 0%, #f0e68c 100%);
      border: 2px solid #8b4513;
      border-radius: 12px;
      margin-bottom: 1.5rem;
      overflow: hidden;
      box-shadow: 0 4px 8px rgba(139, 69, 19, 0.2);

      .entry-header {
        background: #8b4513;
        color: white;
        padding: 1rem 1.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;

        .entry-title {
          font-family: "Cinzel", serif;
          font-size: 1.4rem;
          font-weight: 600;
          margin: 0;
        }

        .entry-actions {
          display: flex;
          gap: 0.5rem;

          ::ng-deep .p-button {
            width: 2rem;
            height: 2rem;
            padding: 0;

            &.p-button-text {
              color: white;

              &:hover {
                background: rgba(255, 255, 255, 0.1);
              }

              &.p-button-danger:hover {
                background: rgba(220, 53, 69, 0.2);
              }
            }
          }
        }
      }

      .entry-content {
        padding: 1.5rem;

        .edit-mode {
          .entry-textarea {
            border: 2px solid #d4af37;
            border-radius: 8px;
            font-family: "Georgia", serif;
            font-size: 1rem;
            line-height: 1.6;
            resize: vertical;

            &:focus {
              border-color: #8b4513;
              box-shadow: 0 0 5px rgba(139, 69, 19, 0.3);
            }
          }

          .edit-actions {
            margin-top: 1rem;
            display: flex;
            gap: 0.75rem;

            ::ng-deep .p-button {
              padding: 0.5rem 1rem;
              font-size: 0.9rem;
            }
          }
        }

        .view-mode {
          .entry-text {
            font-family: "Georgia", serif;
            font-size: 1rem;
            line-height: 1.7;
            color: #4a4a4a;
            margin: 0;
            white-space: pre-wrap;
          }

          .entry-placeholder {
            font-style: italic;
            color: #888;
            text-align: center;
            margin: 0;
            padding: 2rem;
          }
        }
      }
    }
  }
}

// Seção de Planejamento do Mestre
.planning-content {
  .planning-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid #dc143c;

    .planning-title {
      font-family: "Cinzel", serif;
      font-size: 1.8rem;
      font-weight: 700;
      color: #8b4513;
      margin: 0;
      text-shadow: 1px 1px 2px rgba(139, 69, 19, 0.3);
    }

    .add-note-btn {
      ::ng-deep.p-button {
        background: #d4af37;
        border-color: #d4af37;
        font-weight: 600;

        &:hover {
          background: #b8941f;
          border-color: #b8941f;
        }
      }
    }
  }

  .new-note-input {
    margin-bottom: 1.5rem;

    textarea {
      border: 2px solid #dc143c;
      border-radius: 8px;
      font-family: "Georgia", serif;
      resize: vertical;

      &:focus {
        border-color: #8b4513;
        box-shadow: 0 0 5px rgba(139, 69, 19, 0.3);
      }
    }
  }

  .planning-notes {
    .planning-note-card {
      background: linear-gradient(135deg, #ffe4e1 0%, #ffd0dc 100%);
      border: 2px solid #dc143c;
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1rem;
      box-shadow: 0 4px 8px rgba(220, 20, 60, 0.15);

      .edit-mode {
        .note-textarea {
          border: 2px solid #dc143c;
          border-radius: 8px;
          font-family: "Georgia", serif;
          font-size: 1rem;
          line-height: 1.6;
          resize: vertical;

          &:focus {
            border-color: #8b4513;
            box-shadow: 0 0 5px rgba(139, 69, 19, 0.3);
          }
        }

        .edit-actions {
          margin-top: 1rem;
          display: flex;
          gap: 0.75rem;

          ::ng-deep .p-button {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
          }
        }
      }

      .view-mode {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 1rem;

        .note-text {
          font-family: "Georgia", serif;
          font-size: 1rem;
          line-height: 1.6;
          color: #4a4a4a;
          margin: 0;
          flex: 1;
          white-space: pre-wrap;
        }

        .note-actions {
          display: flex;
          gap: 0.5rem;
          flex-shrink: 0;

          ::ng-deep .p-button {
            width: 2rem;
            height: 2rem;
            padding: 0;

            &.p-button-text {
              color: #8b4513;

              &:hover {
                background: rgba(139, 69, 19, 0.1);
              }

              &.p-button-danger:hover {
                background: rgba(220, 53, 69, 0.1);
                color: #dc3545;
              }
            }
          }
        }
      }
    }

    .empty-planning {
      text-align: center;
      padding: 3rem 2rem;
      color: #888;

      .pi {
        font-size: 3rem;
        margin-bottom: 1rem;
        color: #ddd;
      }

      p {
        font-size: 1.1rem;
        margin: 0;
        font-style: italic;
      }
    }
  }

  .ai-suggestions {
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid #ddd;

    .ai-btn {
      ::ng-deep.p-button {
        border-color: #6c757d;
        color: #6c757d;
        font-weight: 600;

        &:hover:not(:disabled) {
          background: rgba(108, 117, 125, 0.1);
        }

        &:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }
      }
    }
  }
}

// Responsividade
@media (max-width: 768px) {
  .saga-header,
  .planning-header {
    flex-direction: column;
    gap: 1rem;

    .saga-title,
    .planning-title {
      text-align: center;
    }
  }

  .planning-note-card .view-mode {
    flex-direction: column;
    gap: 1rem;

    .note-actions {
      align-self: flex-end;
    }
  }
}
