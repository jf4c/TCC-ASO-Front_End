// Estilização do componente de diário e planejamento da campanha

.campaign-journal-section {
  // Configuração geral das abas
  .journal-tabs {
    // Customização das abas do PrimeNG
    ::ng-deep .p-tabview-nav {
      background: var(--accent-tertiary);
      border-radius: 8px 8px 0 0;

      .p-tabview-nav-link {
        color: var(--accent-secondary);
        font-weight: 600;
        padding: 1rem 1.5rem;
        border: none;

        .pi {
          margin-right: 0.5rem;
        }

        &:hover {
          background: rgba(139, 69, 19, 0.2);
        }
      }

      .p-tabview-nav-link[aria-selected="true"] {
        background: var(--accent-secondary);
        color: white;

        &:hover {
          background: var(--accent-secondary);
        }
      }
    }

    ::ng-deep .p-tabview-panels {
      background: white;
      border: 2px solid var(--accent-secondary);
      border-radius: 0 0 8px 8px;
      padding: 1.5rem;
      min-height: 500px;
    }
  }
}

// Seção do Diário de Aventuras
.journal-content {
  .saga-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid var(--accent-primary);

    .saga-title {
      font-family: "Cinzel", serif;
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--accent-danger);
      margin: 0;
      text-shadow: 1px 1px 2px var(--accent-tertiary);
    }

    .add-entry-btn {
      ::ng-deep.p-button {
        background: var(--accent-primary);
        border-color: var(--accent-primary);
        font-weight: 600;

        &:hover {
          background: var(--accent-quinary);
          border-color: var(--accent-quinary);
        }
      }
    }
  }

  .new-entry-input {
    margin-bottom: 1.5rem;

    input {
      border: 2px solid var(--accent-primary);
      border-radius: 8px;
      padding: 0.75rem;
      font-size: 1rem;

      &:focus {
        border-color: var(--accent-secondary);
        box-shadow: 0 0 5px var(--accent-tertiary);
      }
    }
  }

  .new-act-input {
    margin: 1.5rem 0;
    // margin-bottom: 1.5rem;

    .new-act-form {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0;
      background: transparent;
      border: none;
      border-radius: 0;

      .pending-act-input {
        font-family: "Cinzel", serif;
        font-size: 1.1rem;
        font-weight: 600;
        border: none !important;
        border-radius: 0;
        padding: 0;
        color: white !important;
        background: transparent !important;

        &:focus {
          border: none !important;
          box-shadow: none !important;
          outline: none;
        }

        &::placeholder {
          color: var(--accent-senary) !important;
        }
      }

      .new-act-actions {
        display: flex;
        gap: 0.5rem;

        ::ng-deep .p-button {
          width: 2rem;
          height: 2rem;
          padding: 0;
        }
      }
    }
  }

  .journal-entries {
    .journal-accordion {
      // Customização específica do accordion do diário
      ::ng-deep {
        .p-accordion-header {
          background: var(--accent-secondary);
          border: 1px solid var(--accent-secondary);
          border-radius: 8px 8px 0 0;
          margin-bottom: 0;

          .p-accordion-header-link {
            padding: 1rem 1.5rem;
            color: white;
            background: transparent;
            border: none;
            width: 100%;

            &:hover {
              background: rgba(255, 255, 255, 0.1);
            }

            &:focus {
              box-shadow: 0 0 0 2px var(--accent-primary);
            }
          }

          &.p-accordion-header-active {
            background: #6d350f;
            border-color: #6d350f;
          }
        }

        .p-accordion-content {
          background: linear-gradient(135deg, #f5f5dc 0%, #f0e68c 100%);
          border: 2px solid var(--accent-secondary);
          border-top: none;
          border-radius: 0 0 8px 8px;
          margin-bottom: 1rem;

          .p-accordion-content-wrapper {
            padding: 0;
          }
        }

        .p-accordion-tab:last-child {
          .p-accordion-content {
            margin-bottom: 0;
          }
        }
      }

      .accordion-entry-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;

        .entry-title {
          font-family: "Cinzel", serif;
          font-size: 1.1rem;
          font-weight: 600;
          margin: 0;
          flex: 1;
        }

        .entry-title-input {
          font-family: "Cinzel", serif;
          font-size: 1.1rem;
          font-weight: 600;
          margin: 0;
          flex: 1;
          background: transparent;
          border: none;
          border-radius: 0;
          padding: 0;
          color: white;

          &:focus {
            outline: none;
            border: none;
            box-shadow: none;
          }

          &::placeholder {
            color: var(--accent-senary);
          }
        }

        .entry-actions {
          display: flex;
          gap: 0.5rem;
          margin-left: 1rem;

          ::ng-deep .p-button {
            width: 2rem;
            height: 2rem;
            padding: 0;

            &.p-button-text {
              color: white;

              &:hover {
                background: rgba(255, 255, 255, 0.2);
              }

              &.p-button-danger:hover {
                background: var(--accent-danger-active);
              }
            }
          }
        }
      }

      .accordion-entry-content {
        padding: 1.5rem;

        .chapters-section {
          .chapters-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;

            .chapter-item {
              padding: 1rem 0;
              border-left: 4px solid var(--accent-primary);
              padding-left: 1rem;
              transition: all 0.3s ease;
              position: relative;
              &:hover {
                .chapter-actions {
                  opacity: 1 !important;
                  visibility: visible !important;
                }
              }

              .chapter-header {
                display: flex;
                justify-content: space-between;
                align-items: flex-start;
                margin-bottom: 0.5rem;

                .chapter-title {
                  font-family: "Cinzel", serif;
                  font-size: 1.1rem;
                  font-weight: 600;
                  color: var(--accent-primary);
                  margin: 0;
                  flex: 1;
                  padding-right: 1rem;
                }

                .chapter-actions {
                  display: flex;
                  gap: 0.5rem;
                  opacity: 0;
                  visibility: hidden;
                  transition: all 0.3s ease;

                  .chapter-edit-btn,
                  .chapter-delete-btn {
                    ::ng-deep.p-button {
                      width: 1.7rem;
                      height: 1.7rem;
                      padding: 1rem;
                      font-size: 1rem;

                      &.p-button-text {
                        color: var(--color-primary);

                        &:hover {
                          background: var(--bg-tertiary); // Escurecido (era 0.1)
                          color: var(--color-primary);
                        }
                      }

                      &.p-button-danger {
                        color: var(--accent-danger);

                        &:hover {
                          background: var(--accent-danger-active);
                          color: var(--text-quaternary);
                        }
                      }
                    }
                  }
                }
              }

              .chapter-content {
                .chapter-text {
                  font-family: "Georgia", serif;
                  font-size: 1rem;
                  line-height: 1.7;
                  color: var(--text-white); // Texto branco para contraste com fundo escuro
                  margin: 0;
                  white-space: pre-wrap;
                  text-align: justify;
                }

                .chapter-placeholder {
                  font-style: italic;
                  color: var(--text-secondary); // Cor clara para placeholder
                  margin: 0;
                  font-size: 0.9rem;
                }
              }

              .no-chapters {
                text-align: center;
                padding: 2rem;
                color: var(--text-secondary);
                font-style: italic;

                .no-chapters-text {
                  margin: 0;
                  font-size: 1rem;
                  line-height: 1.5;
                }
              }
            }
          }
        }

        .edit-mode {
          .entry-textarea {
            border: 2px solid var(--accent-primary);
            border-radius: 8px;
            font-family: "Georgia", serif;
            font-size: 1rem;
            line-height: 1.6;
            resize: vertical;

            &:focus {
              border-color: var(--accent-secondary);
              box-shadow: 0 0 5px var(--accent-tertiary);
            }
          }

          .edit-actions {
            margin-top: 1rem;
            display: flex;
            gap: 0.75rem;

            ::ng-deep .p-button {
              padding: 0.5rem 1rem;
              font-size: 0.9rem;
            }
          }
        }
      }
    }

    // Fallback para quando não há entradas (manter estrutura existente se necessário)
    .journal-entry-card {
      background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--accent-septenary) 100%);
      border: 2px solid var(--accent-secondary);
      border-radius: 12px;
      margin-bottom: 1.5rem;
      overflow: hidden;
      box-shadow: 0 4px 8px var(--accent-tertiary);

      .entry-header {
        background: var(--accent-secondary);
        color: var(--text-primary);
        padding: 1rem 1.5rem;
        display: flex;
        justify-content: space-between;
        align-items: center;

        .entry-title {
          font-family: "Cinzel", serif;
          font-size: 1.4rem;
          font-weight: 600;
          margin: 0;
        }

        .entry-actions {
          display: flex;
          gap: 0.5rem;

          ::ng-deep .p-button {
            width: 2rem;
            height: 2rem;
            padding: 0;

            &.p-button-text {
              color: var(--text-primary);

              &:hover {
                background: rgba(255, 255, 255, 0.1);
              }

              &.p-button-danger:hover {
                background: var(--accent-danger-active);
              }
            }
          }
        }
      }

      .entry-content {
        padding: 1.5rem;

        .edit-mode {
          .entry-textarea {
            border: 2px solid var(--accent-primary);
            border-radius: 8px;
            font-family: "Georgia", serif;
            font-size: 1rem;
            line-height: 1.6;
            resize: vertical;

            &:focus {
              border-color: var(--accent-secondary);
              box-shadow: 0 0 5px var(--accent-tertiary);
            }
          }

          .edit-actions {
            margin-top: 1rem;
            display: flex;
            gap: 0.75rem;

            ::ng-deep .p-button {
              padding: 0.5rem 1rem;
              font-size: 0.9rem;
            }
          }
        }

        .view-mode {
          .entry-text {
            font-family: "Georgia", serif;
            font-size: 1rem;
            line-height: 1.7;
            color: var(--text-quaternary);
            margin: 0;
            white-space: pre-wrap;
          }

          .entry-placeholder {
            font-style: italic;
            color: var(--text-secondary);
            text-align: center;
            margin: 0;
            padding: 2rem;
          }
        }
      }
    }
  }
}

// Seção de Planejamento do Mestre
.planning-content {
  .planning-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid var(--accent-danger);

    .planning-title {
      font-family: "Cinzel", serif;
      font-size: 1.8rem;
      font-weight: 700;
      color: var(--accent-secondary);
      margin: 0;
      text-shadow: 1px 1px 2px var(--accent-tertiary);
    }

    .add-note-btn {
      ::ng-deep.p-button {
        background: var(--accent-primary);
        border-color: var(--accent-primary);
        font-weight: 600;

        &:hover {
          background: var(--accent-secondary);
          border-color: var(--accent-secondary);
        }
      }
    }
  }

  .new-note-input {
    margin-bottom: 1.5rem;

    textarea {
      border: 2px solid var(--accent-danger);
      border-radius: 8px;
      font-family: "Georgia", serif;
      resize: vertical;

      &:focus {
        border-color: var(--accent-secondary);
        box-shadow: 0 0 5px var(--accent-tertiary);
      }
    }
  }

  .planning-notes {
    .planning-note-card {
      background: linear-gradient(135deg, var(--accent-octonary) 0%, var(--accent-nonary) 100%);
      border: 2px solid var(--accent-danger);
      border-radius: 12px;
      padding: 1.5rem;
      margin-bottom: 1rem;
      box-shadow: 0 4px 8px var(--accent-danger-hover);

      .edit-mode {
        .note-textarea {
          border: 2px solid var(--accent-danger);
          border-radius: 8px;
          font-family: "Georgia", serif;
          font-size: 1rem;
          line-height: 1.6;
          resize: vertical;

          &:focus {
            border-color: var(--accent-secondary);
            box-shadow: 0 0 5px var(--accent-tertiary);
          }
        }

        .edit-actions {
          margin-top: 1rem;
          display: flex;
          gap: 0.75rem;

          ::ng-deep .p-button {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
          }
        }
      }

      .view-mode {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        gap: 1rem;

        .note-text {
          font-family: "Georgia", serif;
          font-size: 1rem;
          line-height: 1.6;
          color: var(--text-quaternary);
          margin: 0;
          flex: 1;
          white-space: pre-wrap;
        }

        .note-actions {
          display: flex;
          gap: 0.5rem;
          flex-shrink: 0;

          ::ng-deep .p-button {
            width: 2rem;
            height: 2rem;
            padding: 0;

            &.p-button-text {
              color: var(--accent-secondary);

              &:hover {
                background: var(--accent-tertiary);
              }

              &.p-button-danger:hover {
                background: var(--accent-danger-hover);
                color: var(--accent-danger);
              }
            }
          }
        }
      }
    }

    .empty-planning {
      text-align: center;
      padding: 3rem 2rem;
      color: var(--text-secondary);

      .pi {
        font-size: 3rem;
        margin-bottom: 1rem;
        color: var(--bg-tertiary);
      }

      p {
        font-size: 1.1rem;
        margin: 0;
        font-style: italic;
      }
    }
  }

  .ai-suggestions {
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--bg-tertiary);

    .ai-btn {
      ::ng-deep.p-button {
        border-color: var(--text-secondary);
        color: var(--text-secondary);
        font-weight: 600;

        &:hover:not(:disabled) {
          background: var(--accent-tertiary);
        }

        &:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }
      }
    }
  }
}

// Responsividade
@media (max-width: 768px) {
  .saga-header,
  .planning-header {
    flex-direction: column;
    gap: 1rem;

    .saga-title,
    .planning-title {
      text-align: center;
    }
  }

  .planning-note-card .view-mode {
    flex-direction: column;
    gap: 1rem;

    .note-actions {
      align-self: flex-end;
    }
  }
}
