<header class="aso-header">
  <div class="logo">
    <img src="assets/escudo.png" alt="Logo" />
    <h1 class="logo-title">ASO</h1>
  </div>

  <nav class="nav-bar">
    <button 
      class="hamburger" 
      aria-label="Toggle navigation" 
      type="button"
      (click)="toggleMobileNav()"
      [attr.aria-expanded]="isMobileNavOpen"
    >
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
      <span class="hamburger-line"></span>
    </button>

    <ul class="nav-list" [class.nav-list--open]="isMobileNavOpen">
      <li class="nav-item">
        <a routerLink="/home" routerLinkActive="active" (click)="closeAllMenus()">
          <span>ğŸ°</span>
          InÃ­cio
        </a>
      </li>

      <li class="nav-item">
        <a routerLink="/personagens" routerLinkActive="active" (click)="closeAllMenus()">
          <span>ğŸ§™ğŸ¼â€â™‚ï¸</span>
          Personagens
        </a>
      </li>

      <li class="nav-item">
        <a routerLink="/campanhas" routerLinkActive="active" (click)="closeAllMenus()">
          <span>ğŸ«…ğŸ¼</span>
          Campanhas
        </a>
      </li>

      <li class="nav-item">
        <a routerLink="/mundos" routerLinkActive="active" (click)="closeAllMenus()">
          <span>ğŸŒ</span>
          Mundos
        </a>
      </li>
    </ul>
  </nav>

  <div class="user-section">
    <!-- UsuÃ¡rio Logado -->
    <div *ngIf="isLoggedIn" class="user-wrapper">
      <span class="username">{{ username }}</span>
      
      <aso-avatar 
        [src]="userPhotoUrl"
        [alt]="username"
        size="sm"
        fallback="ğŸ‘¤"
        (avatarClick)="toggleUserMenu()"
        [attr.aria-expanded]="isUserMenuOpen"
        [attr.aria-haspopup]="true"
      ></aso-avatar>

      <!-- Menu inline abaixo do avatar -->
      <div 
        class="user-menu" 
        [class.user-menu--open]="isUserMenuOpen"
        role="menu"
        [attr.aria-hidden]="!isUserMenuOpen"
      >
        <button 
          type="button" 
          class="user-menu__item"
          role="menuitem"
          (click)="toggleTheme(); closeAllMenus()"
        >
          <span class="user-menu__icon">ğŸ¨</span>
          Tema
        </button>

        <hr class="user-menu__divider" />

        <button 
          type="button" 
          class="user-menu__item user-menu__item--danger"
          role="menuitem"
          (click)="onLogout()"
        >
          <span class="user-menu__icon">ğŸšª</span>
          Sair
        </button>
      </div>
    </div>

    <!-- BotÃ£o de Login -->
    <button 
      *ngIf="!isLoggedIn"
      type="button"
      pButton
      label="Entrar"
      icon="pi pi-sign-in"
      severity="primary"
      (click)="onLogin()"
    ></button>
  </div>
</header>
